<h1>Eventos</h1>

<div [hidden]="!home">
	<h2>Home</h2>
	<br>
	<h3>Principais Eventos</h3>
	<table class="table table-striped">
		<tr>
			<th>ID</th>
			<th>Nome</th>
			<th>Início</th>
			<th>Término</th>
			<th>Opções</th>
		</tr>
		<tr *ngFor="let evento of eventosPrinc">
			<td>{{evento.id}}</td>
			<td>{{evento.nome}}</td>
			<td>{{evento.inicio}}</td>
			<td>{{evento.termino}}</td>
			<td><button (click)="mostrarDetalhes(evento); detalhes=true; home=false" class="btn btn-info">Visualizar</button></td>
		</tr>
	</table>
	<br>
	<button class="btn btn-primary" (click)="todosEventos=true; home=false">Exibir todos os eventos <span class="badge">{{ eventos.length }}</span></button>
</div>

<div [hidden]="!todosEventos">
	<h3>Todos os eventos</h3>
	<button (click)="home=true; todosEventos=false" class="btn btn-info">Home</button><br><br>
	<table class="table table-striped">
		<tr>
			<th>ID</th>
			<th>Sigla</th>
			<th>Nome</th>
			<th>Inicio</th>
			<th>Termino</th>
			<th>Opções</th>
		</tr>
		<tr *ngFor="let evento of eventos">
			<td>{{evento.id}}</td>
			<td>{{evento.sigla}}
				<td>{{evento.nome}}</td>
				<td>{{evento.inicio}}</td>
				<td>{{evento.termino}}</td>
				<td><button (click)="mostrarDetalhes(evento); detalhes=true; todosEventos=false" class="btn btn-info">Visualizar</button></td>
		</tr>
	</table><br><br>
	<button (click)="todosEventos=false; cadastra=true; btnVoltar=false; btnHome=true; formCadastro.reset()" class="btn btn-default">Cadastrar novo evento</button>
</div>

<div [hidden]="!cadastra">
	<div [hidden]="!btnHome">
		<button (click)="todosEventos=true; cadastra=false; aux=false" class="btn btn-info">Voltar à tela de eventos</button><br><br>
	</div>
	<div [hidden]="!btnVoltar">
		<button (click)="detalhes=true; cadastra=false" class="btn btn-info">Voltar ao evento</button><br><br>
	</div>
	<form (ngSubmit)="onSubmit()" #formCadastro="ngForm">
		<div class="form-group">
			<label for="nome">Nome</label>
			<input type="text" id="nome" name="nome" class="form-control" [(ngModel)]="evento.nome" #nome="ngModel" placeholder="Nome do evento"
			 required>
			<div class="alert alert-danger" [hidden]="nome.valid || nome.pristine">Você deve informar o nome do evento.</div>
		</div>
		<div class="form-group">
			<label for="sigla">Sigla</label>
			<input type="text" id="sigla" name="sigla" class="form-control" [(ngModel)]="evento.sigla" #sigla="ngModel" placeholder="Sigla do evento"
			 required>
			<div class="alert alert-danger" [hidden]="sigla.valid || sigla.pristine">Você deve informar a sigla do evento.</div>
		</div>

		<div>
			<label for="inicio">Data Início</label>
			<input type="text" id="inicio" name="inicio" class="form-control" [(ngModel)]="evento.inicio" #inicio="ngModel" placeholder="Início do Evento"
			 required>
			<div class="alert alert-danger" [hidden]="inicio.valid || inicio.pristine">Você deve informar a data de início do evento.</div>
		</div>

		<div>
			<label for="termino">Data Término</label>
			<input type="text" id="termino" name="termino" class="form-control" [(ngModel)]="evento.termino" #termino="ngModel" placeholder="Término do Evento"
			 required>
			<div class="alert alert-danger" [hidden]="termino.valid || termino.pristine">Você deve informar a data de término do evento.</div>
		</div>

		<div>
			<label for="url">URL do Evento</label>
			<input type="text" id="url" name="url" class="form-control" [(ngModel)]="evento.url" #url="ngModel" placeholder="URL do Evento"
			 required>
			<div class="alert alert-danger" [hidden]="url.valid || url.pristine">Você deve informar a URL do evento.</div>
		</div>

		<div>
			<label for="cidade">Cidade do Evento</label>
			<input type="text" id="cidade" name="cidade" class="form-control" [(ngModel)]="evento.cidade" #cidade="ngModel" placeholder="Cidade do Evento"
			 required>
			<div class="alert alert-danger" [hidden]="cidade.valid || cidade.pristine">Você deve informar a cidade do evento.</div>
		</div>

		<div>
			<label for="estado">Estado do Evento</label>
			<input type="text" id="estado" name="estado" class="form-control" [(ngModel)]="evento.estado" #estado="ngModel" placeholder="Estado do Evento"
			 required>
			<div class="alert alert-danger" [hidden]="estado.valid || estado.pristine">Você deve informar o estado do evento.</div>
		</div>

		<div>
			<label for="local">Local do Evento</label>
			<input type="text" id="local" name="local" class="form-control" [(ngModel)]="evento.local" #local="ngModel" placeholder="Local do Evento"
			 required>
			<div class="alert alert-danger" [hidden]="local.valid || local.pristine">Você deve informar o local do evento.</div>
		</div><br><br>
		<div [hidden]="btnSalvaAlt">
			<button type="submit" class="btn btn-success" [disabled]="!formCadastro.form.valid" (click)="cadastra=false; msgSalva=true">Salvar</button><br><br>
		</div>
		<div [hidden]="!btnSalvaAlt">
			<button type="submit" class="btn btn-success" [disabled]="!formCadastro.form.valid" (click)="cadastra=false; msgAlt=true;">Salvar alterações</button><br><br>
		</div>
	</form>
</div>

<div [hidden]="!msgSalva">
	<button (click)="todosEventos=true; msgSalva=false" class="btn btn-info">Voltar à tela eventos</button><br><br>
	<div class="alert alert-success">
		<p>Dados cadastrados com sucesso!</p>
		<p><button class="btn btn-default" (click)="novoEvento(); enviado = false; cadastra=true; msgSalva=false">Cadastrar novo evento</button>
	</div>
</div>

<div [hidden]="!msgAlt">
	<button (click)="todosEventos=true; msgAlt=false" class="btn btn-info">Voltar à tela eventos</button><br><br>
	<div class="alert alert-success">
		<p>Dados alterados com sucesso!</p>
		<p><button class="btn btn-default" (click)="novoEvento(); enviado = false; cadastra=true; msgAlt=false">Cadastrar novo evento</button>
	</div>
</div>


<div *ngIf="eventoSelecionado">
	<div [hidden]="!detalhes">
		<button (click)="todosEventos=true; eventoSelecionado=false" class="btn btn-info">Voltar à tela de eventos</button><br><br>
		<div class="jumbotron">
			<h1>{{eventoSelecionado.sigla}}</h1>
			<h3>{{eventoSelecionado.nome}}</h3>
			<p>De {{eventoSelecionado.inicio}} a {{eventoSelecionado.termino}}</p>
			<p>Em {{eventoSelecionado.cidade}} - {{eventoSelecionado.estado}}, no(a) {{eventoSelecionado.local}}.</p>
			<p>Mais informações no site <a [href]="eventoSelecionado.url">{{eventoSelecionado.url}}</a>.</p>

			<button (click)="editarEvento(eventoSelecionado); todosEventos=false; cadastra=true; detalhes=false; btnHome=false; btnVoltar=true; btnSalvaAlt=true"
			 class="btn btn-warning">Editar</button>

			<button (click)="aux=eventoSelecionado; desejaExcluir=true; eventoSelecionado=false;" class="btn btn-danger">Excluir</button>
		</div>
	</div>
</div>

<div [hidden]="!desejaExcluir" class="jumbotron" data-ng-show="displayLocationDeletePopup">
	<div class="form-controls-alert">
		<h2>Deseja realmente excluir o evento?</h2>
		<button (click)="desejaExcluir=false; eventoSelecionado=aux; detalhes=true" class="btn btn-primary">Não</button>
		<button (click)="excluirEvento(aux); excluidoSucesso=true; eventoSelecionado=false; desejaExcluir=false" class="btn btn-danger">Sim</button>
	</div>
</div>

<div [hidden]="!excluidoSucesso">
	<button (click)="todosEventos=true; excluidoSucesso=false" class="btn btn-info">Voltar à tela de eventos</button><br><br>
	<h4 class="alert alert-success">Evento excluído com sucesso</h4>
</div>