<h1>Eventos</h1>
<h2 [hidden]="editar">Cadastro de eventos</h2>
<h2 [hidden]="!editar">Editar evento</h2>
<div [hidden]="enviado">
    <form (ngSubmit)="onSubmit()" #formCadastro="ngForm">
    <div class="form-group">
        <label for="nome">
        Nome
        </label>
        <input type="text" id="nome" name="nome" class="form-control"
            [(ngModel)]="evento.nome" #nome="ngModel"
            placeholder="Nome do evento" required>
        <div class="alert alert-danger" [hidden]="nome.valid || nome.pristine">Você deve informar o nome do evento.</div>
    </div>

    <div class="form-group">
        <label for="sigla">Sigla</label>
        <input type="text" id="sigla" name="sigla" class="form-control"
            [(ngModel)]="evento.sigla" #sigla="ngModel"
            placeholder="Sigla do evento" required>
        <div class="alert alert-danger" [hidden]="sigla.valid || sigla.pristine">Você deve informar a sigla do evento.</div>
    </div>

    <div class="form-group">
        <label for="inicio">Início</label>
        <input type="text" id="inicio" name="inicio" class="form-control"
            [(ngModel)]="evento.inicio" #inicio="ngModel"
            placeholder="Data de início do evento" required>
        <div class="alert alert-danger" [hidden]="inicio.valid || inicio.pristine">Você deve informar a data de início do evento.</div>
    </div>

    <div class="form-group">
        <label for="termino">Término</label>
        <input type="text" id="termino" name="termino" class="form-control"
            [(ngModel)]="evento.termino" #termino="ngModel"
            placeholder="Data de término do evento" required>
        <div class="alert alert-danger" [hidden]="termino.valid || termino.pristine">Você deve informar a data de término do evento.</div>
    </div>

    <div class="form-group">
        <label for="url">Url</label>
        <input type="text" id="url" name="url" class="form-control"
            [(ngModel)]="evento.url" #url="ngModel"
            placeholder="Url do evento" required>
        <div class="alert alert-danger" [hidden]="url.valid || url.pristine">Você deve informar a url do evento.</div>
    </div>

    <div class="form-group">
        <label for="cidade">Cidade</label>
        <input type="text" id="cidade" name="cidade" class="form-control"
            [(ngModel)]="evento.cidade" #cidade="ngModel"
            placeholder="Cidade do evento" required>
        <div class="alert alert-danger" [hidden]="cidade.valid || cidade.pristine">Você deve informar a cidade do evento.</div>
    </div>

    <div class="form-group">
        <label for="estado">Estado</label>
        <input type="text" id="estado" name="estado" class="form-control"
            [(ngModel)]="evento.estado" #estado="ngModel"
            placeholder="Estado do evento" required>
        <div class="alert alert-danger" [hidden]="estado.valid || estado.pristine">Você deve informar o estado do evento.</div>
    </div>

    <div class="form-group">
        <label for="local">Local</label>
        <input type="text" id="local" name="local" class="form-control"
            [(ngModel)]="evento.local" #local="ngModel"
            placeholder="Local do evento" required>
        <div class="alert alert-danger" [hidden]="local.valid || local.pristine">Você deve informar o local do evento.</div>
    </div>

    <button type="submit" class="btn btn-success" [disabled]="!formCadastro.form.valid">Salvar</button>
    <button type="button" class="btn btn-default" (click)="novoEvento(); formCadastro.reset()">Novo</button>
    </form>
</div>
<div [hidden]="!enviado" class="alert alert-success">
    <p [hidden]="editar">Dados cadastrados com sucesso!</p>
    <p [hidden]="!editar">Dados alterados com sucesso!</p>
    <p><button class="btn btn-default" (click)="novoEvento(); enviado = false; editar = false; formCadastro.reset()">Cadastrar novo evento</button>
</div>

<hr>
<h3>Eventos existentes</h3>
<table class="table table-striped" style="width:100%">
  <tr *ngFor="let evento of eventos">
  <td>
    {{ evento.sigla }}
  </td>
  <td>
    <button (click)="mostrarDetalhes(evento)">Detalhes</button>
    <button (click)="editarEvento(evento);" [disabled] ="enviado">Editar</button>
    <button (click)="excluirEvento(evento)">Excluir</button>
  </td>
  </tr>
</table>

<div class="panel panel-default" *ngIf="eventoSelecionado">
  <div class="panel-body">
      <h3>{{eventoSelecionado.nome}} - {{eventoSelecionado.sigla}}</h3>
      <p>De {{eventoSelecionado.inicio}} a {{eventoSelecionado.termino}},
          em {{eventoSelecionado.cidade}} - {{eventoSelecionado.estado}},
      no(a) {{eventoSelecionado.local}}.</p>
      <p>Mais informações no site <a [href]="eventoSelecionado.url">{{eventoSelecionado.url}}</a>.</p>
  </div>
</div>
