<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">LPWeb</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#" (click) = "modo = 'home'">Home<span class="sr-only">(current)</span></a></li>
        <li><a href="#" (click) = "listarEventos()">Eventos</a></li>
      </ul>
    </div>
  </div>
</nav>

<div *ngIf="modo == 'home'"><!-- TELA HOME -->
    <h2>TELA HOME</h2>
    <div *ngIf = "eventos.length > 0">
        <h3>Eventos</h3>
        <a href="#" class="list-group-item" (click)="mostrarDetalhes(eventos[0])">{{ eventos[0].sigla }}</a>
        <a *ngIf = "eventos.length > 1" href="#" class="list-group-item" (click)="mostrarDetalhes(eventos[1])">{{ eventos[1].sigla }}</a>
        <a *ngIf = "eventos.length > 2" href="#" class="list-group-item" (click)="mostrarDetalhes(eventos[2])">{{ eventos[2].sigla }}</a>
        <a href="#" class="list-group-item" (click)="listarEventos()"><b>Ver todos eventos cadastrados</b></a>
        <a class="list-group-item" ><b>Quantidade de Eventos cadastrados: {{eventos.length}}</b></a>
    </div>
    <div *ngIf = "eventos.length == 0">
        <h4>Nenhum evento cadastrado</h4>
    </div>
</div>

<div *ngIf="modo == 'eventos'"><!-- TELA EVENTOS -->
    <h2>TELA EVENTOS</h2>
    <div *ngIf = "eventos.length > 0">
        <table class="table table-striped">
        <th>Evento</th>
        <tr *ngFor="let evento of eventos">
            <td><a href="#" class="list-group-item" (click)="mostrarDetalhes(evento)">{{ evento.sigla }}</a></td>
        </tr>
        <tr>
            <td>
                <button  class="btn btn-default"  (click)="cadastrar()">Cadastrar novo evento</button>
                <button  class="btn btn-default"  (click)="modo='home'">TELA HOME</button>
            </td>
        </tr>
        </table>
    </div>
    <div *ngIf = "eventos.length == 0">
        <h4>Nenhum evento cadastrado</h4>
    </div>
</div>

<div *ngIf="modo == 'cadastrar'"><!-- TELA CADASTRAR EVENTO -->
    <h2>TELA CADASTRAR EVENTO</h2>
    <div>
        <form (ngSubmit)="onSubmit()" #formCadastro="ngForm">
        <div class="form-group">
            <label for="nome">Nome</label>
            <input type="text" id="nome" name="nome" class="form-control"
                [(ngModel)]="evento.nome" #nome="ngModel"
                placeholder="Nome do evento" required>
            <div class="alert alert-danger" [hidden]="nome.valid || nome.pristine">Você deve informar o nome do evento.</div>
        </div>

        <div class="form-group">
            <label for="sigla">Sigla</label>
            <input type="text" id="sigla" name="sigla" class="form-control"
                [(ngModel)]="evento.sigla" #sigla="ngModel"
                placeholder="Sigla do evento" required>
            <div class="alert alert-danger" [hidden]="sigla.valid || sigla.pristine">Você deve informar a sigla do evento.</div> 
        </div>
        <div class="form-group">
            <label for="inicio">Inicio</label>
            <input type="text" id="inicio" name="inicio" class="form-control"
                [(ngModel)]="evento.inicio" #inicio="ngModel"
                placeholder="Data de inicio do evento" required>
            <div class="alert alert-danger" [hidden]="inicio.valid || inicio.pristine">Você deve informar a data de inicio do evento.</div> 
        </div>
        <div class="form-group">
            <label for="termino">Termino</label>
            <input type="text" id="termino" name="termino" class="form-control"
                [(ngModel)]="evento.termino" #termino="ngModel"
                placeholder="Data de termino do evento" required>
            <div class="alert alert-danger" [hidden]="termino.valid || termino.pristine">Você deve informar a data de termino do evento.</div> 
        </div>
        <div class="form-group">
            <label for="url">Url</label>
            <input type="text" id="url" name="url" class="form-control"
                [(ngModel)]="evento.url" #url="ngModel"
                placeholder="Site do evento" required>
            <div class="alert alert-danger" [hidden]="url.valid || url.pristine">Você deve informar o site do evento.</div> 
        </div>
        <div class="form-group">
            <label for="cidade">Cidade</label>
            <input type="text" id="cidade" name="cidade" class="form-control"
                [(ngModel)]="evento.cidade" #cidade="ngModel"
                placeholder="Cidade do evento" required>
            <div class="alert alert-danger" [hidden]="cidade.valid || cidade.pristine">Você deve informar a cidade do evento.</div> 
        </div>
        <div class="form-group">
            <label for="estado">Estado</label>
            <input type="text" id="estado" name="estado" class="form-control"
                [(ngModel)]="evento.estado" #estado="ngModel"
                placeholder="Estado do evento" required>
            <div class="alert alert-danger" [hidden]="estado.valid || estado.pristine">Você deve informar o estado do evento.</div> 
        </div>
        <div class="form-group">
            <label for="local">Local</label>
            <input type="text" id="local" name="local" class="form-control"
                [(ngModel)]="evento.local" #local="ngModel"
                placeholder="Local do evento" required>
            <div class="alert alert-danger" [hidden]="local.valid || local.pristine">Você deve informar o local do evento.</div> 
        </div>


        <button type="submit" class="btn btn-success" [disabled]="!formCadastro.form.valid">Salvar</button> 
        <button type="button" class="btn btn-default" (click)="novoEvento(); formCadastro.reset()">Novo</button>
        <button  class="btn btn-default"  (click)="listarEventos()">CANCELAR</button>
        </form>
    </div>
    <!--<div [hidden]="!enviado" class="alert alert-success">
        <p>Dados cadastrados com sucesso!</p>
        <p><button class="btn btn-default" (click)="novoEvento();">Cadastrar novo evento</button>
    </div>-->
</div>

<div *ngIf="modo == 'editar'"><!-- TELA EDITAR EVENTO -->
    <h2>TELA EDITAR EVENTO</h2>
    <form (ngSubmit)="alterar()" #formEditar="ngForm">
    <div class="form-group">
        <label for="nome">Nome</label>
        <input type="text" id="nome" name="nome"  class="form-control"
            [(ngModel)]="evento.nome" #nome="ngModel"
            placeholder= "Nome do evento" required>
        <div class="alert alert-danger" [hidden]="nome.valid || nome.pristine">Você deve informar o nome do evento.</div>
    </div>
    <div class="form-group">
        <label for="sigla">Sigla</label>
        <input type="text" id="sigla" name="sigla" class="form-control"
            [(ngModel)]="evento.sigla" #sigla="ngModel"
            placeholder= "Sigla do evento" required>
        <div class="alert alert-danger" [hidden]="sigla.valid || sigla.pristine">Você deve informar a sigla do evento.</div> 
    </div>
    <div class="form-group">
        <label for="inicio">Inicio</label>
        <input type="text" id="inicio" name="inicio" class="form-control"
            [(ngModel)]="evento.inicio" #inicio="ngModel"
            placeholder="Data de inicio do evento" required>
        <div class="alert alert-danger" [hidden]="inicio.valid || inicio.pristine">Você deve informar a data de inicio do evento.</div> 
    </div>
    <div class="form-group">
        <label for="termino">Termino</label>
        <input type="text" id="termino" name="termino" class="form-control"
            [(ngModel)]="evento.termino" #termino="ngModel"
            placeholder="Data de termino do evento" required>
        <div class="alert alert-danger" [hidden]="termino.valid || termino.pristine">Você deve informar a data de termino do evento.</div> 
    </div>
    <div class="form-group">
        <label for="url">Url</label>
        <input type="text" id="url" name="url" class="form-control"
            [(ngModel)]="evento.url" #url="ngModel"
            placeholder="Site do evento" required>
        <div class="alert alert-danger" [hidden]="url.valid || url.pristine">Você deve informar o site do evento.</div> 
    </div>
    <div class="form-group">
        <label for="cidade">Cidade</label>
        <input type="text" id="cidade" name="cidade" class="form-control"
            [(ngModel)]="evento.cidade" #cidade="ngModel"
            placeholder="Cidade do evento" required>
        <div class="alert alert-danger" [hidden]="cidade.valid || cidade.pristine">Você deve informar a cidade do evento.</div> 
    </div>
    <div class="form-group">
        <label for="estado">Estado</label>
        <input type="text" id="estado" name="estado" class="form-control"
            [(ngModel)]="evento.estado" #estado="ngModel"
            placeholder="Estado do evento" required>
        <div class="alert alert-danger" [hidden]="estado.valid || estado.pristine">Você deve informar o estado do evento.</div> 
    </div>
    <div class="form-group">
        <label for="local">Local</label>
        <input type="text" id="local" name="local" class="form-control"
            [(ngModel)]="evento.local" #local="ngModel"
            placeholder="Local do evento" required>
        <div class="alert alert-danger" [hidden]="local.valid || local.pristine">Você deve informar o local do evento.</div> 
    </div>
    <button type="submit" class="btn btn-success" [disabled]="!formEditar.form.valid">Alterar</button> 
    <!--<button type="button" class="btn btn-default" (click)="novoEvento(); formEditar.reset()">Novo</button>-->
    <button class="btn btn-default"  (click)="mostrarDetalhes(evento)">CANCELAR</button>
    </form>
</div>

<div *ngIf="modo == 'excluir'"><!-- TELA EXCLUIR EVENTO -->
    <h2>TELA CONFIRMAR EXCLUSÃO</h2>
    <div>
        <p>Realmente deseja excluir as informações sobre o evento "{{eventoSelecionado.sigla}}"?</p>        
    </div>
    <button  class="btn btn-default"  (click)="excluirEvento(eventoSelecionado)">CONFIRMAR</button>
    <button  class="btn btn-default"  (click)="mostrarDetalhes(eventoSelecionado)">CANCELAR</button>
</div>

<div *ngIf="eventoSelecionado && modo == 'visualizar'"><!-- TELA EVENTO -->
    <h2>TELA EVENTO</h2>
    <div>
        <h3>{{eventoSelecionado.nome}} - {{eventoSelecionado.sigla}}</h3>
        <p>De {{eventoSelecionado.inicio}} a {{eventoSelecionado.termino}},
            em {{eventoSelecionado.cidade}} - {{eventoSelecionado.estado}},
        no(a) {{eventoSelecionado.local}}.</p>
        <p>Mais informações no site <a [href]="eventoSelecionado.url">{{eventoSelecionado.url}}</a>.</p>        
    </div>
    <div *ngIf = "listaArtigos.length > 0">
        <h4>Lista de Artigos</h4>
        <ul *ngFor="let artigo of listaArtigos">
          <li *ngIf = "artigo.idEvento == eventoSelecionado.id">{{artigo.titulo}}</li>
        </ul>  
    </div>
    <div *ngIf ="listaArtigos.length == 0">
        <h4>Nenhuma artigo cadastrado</h4>
    </div>

    <button  class="btn btn-default"  (click)="editar(eventoSelecionado)">Editar evento</button>
    <button class="btn btn-default" (click)="modo = 'cadastrarArtigo'">Cadastrar Artigo</button>
    <button  class="btn btn-default"  (click)="modo = 'excluir'">Excluir evento</button>
    <button  class="btn btn-default"  (click)="listarEventos()">Ver todos os eventos</button>

</div>

<div *ngIf = "modo == 'cadastrarArtigo' || modo == 'cadastrarAutor'"><!--TELA CADASTRO ARTIGO-->
    <h2>TELA CADASTRAR ARTIGO</h2>
    <div>
        <form (ngSubmit)="onSubmitArtigo()" #formCadastro="ngForm">
        <div class="form-group">
            <label for="titulo">Titulo</label>
            <input type="text" id="titulo" name="titulo" class="form-control"
                [(ngModel)]="artigo.titulo" #titulo="ngModel"
                placeholder="Titulo do artigo" required>
            <div class="alert alert-danger" [hidden]="titulo.valid || titulo.pristine">Você deve informar o titulo do artigo.</div>
        </div>

        <div class="form-group">
            <label for="palavrasChave">Palavras-Chave</label>
            <input type="text" id="palavrasChave" name="palavrasChave" class="form-control"
                [(ngModel)]="artigo.palavrasChave" #palavrasChave="ngModel"
                placeholder="Palavras-Chave do artigo" required>
            <div class="alert alert-danger" [hidden]="palavrasChave.valid || palavrasChave.pristine">Você deve informar as palavras-chave do artigo.</div> 
        </div>
        <div class="form-group">
            <label for="resumo">Resumo</label>
            <input type="text" id="resumo" name="resumo" class="form-control"
                [(ngModel)]="artigo.resumo" #resumo="ngModel"
                placeholder="Resumo do artigo" required>
            <div class="alert alert-danger" [hidden]="resumo.valid || resumo.pristine">Você deve informar o resumo artigo.</div> 
        </div>
        <div *ngIf="modo !='cadastrarAutor'">
            <button type="submit" class="btn btn-success" [disabled]="!formCadastro.form.valid || autores.length == 0">Salvar</button> 
            <button type="button" class="btn btn-default" (click)="novoArtigo(); formCadastro.reset()">Novo</button>
            <button  class="btn btn-default"  (click)="modo = 'cadastrarAutor'">Cadastrar Autor</button>
        </div>
        </form>
    </div>
</div>

<div *ngIf = "modo == 'cadastrarAutor'"><!--TELA CADASTRO AUTOR-->
    <h4>TELA CADASTRAR AUTOR</h4>
    <div>
        <form (ngSubmit)="onSubmitAutor()" #formCadastroAutor="ngForm">
            <div class="form-group">
                <label for="nome">Nome</label>
                <input type="text" id="nome" name="nome" class="form-control" [(ngModel)]="autor.nome" 
                #nome="ngModel" placeholder="Nome do autor" required>
                <div class="alert alert-danger" [hidden]="nome.valid || nome.pristine">Você deve informar o nome do autor.</div>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="text" id="email" name="email" class="form-control" [(ngModel)]="autor.email" 
                #email="ngModel" placeholder="Email do autor" required>
                <div class="alert alert-danger" [hidden]="email.valid || email.pristine">Você deve informar o email do autor.</div>
            </div>
            <button type="submit" class="btn btn-success" [disabled]="!formCadastroAutor.form.valid">Cadastrar autor</button> 
            <button type="button" class="btn btn-default" (click)="novoAutor(); formCadastroAutor.reset()">Novo</button>
            <button type="button" class="btn btn-default" (click)="modo = visualizar">Cancelar</button>
        </form>
    </div>
</div>